{% load static %}
<!-- Javascripts -->
	<script src="{% static 'file/shop/js/jquery-3.3.1.min.js' %}"></script>
	<script src="{% static 'file/shop/vendor/bootstrap/js/bootstrap.bundle.min.js' %}"></script>
	<script src="{% static 'file/shop/vendor/OwlCarousel/owl.carousel.js' %}"></script>
	<script src="{% static 'file/shop/vendor/semantic/semantic.min.js' %}"></script>
	<script src="{% static 'file/shop/js/jquery.countdown.min.js' %}"></script>
	<script src="{% static 'file/shop/js/custom.js' %}"></script>
	<script src="{% static 'file/shop/js/offset_overlay.js' %}"></script>
	<script src="{% static 'file/shop/js/night-mode.js' %}"></script>
    <script src="{% static 'file/shop/js/sidebar.js' %}"></script>
    <script src="{% static 'file/shop/js/user_password.js' %}"></script>
    <script src="{% static 'file/shop/js/jquery_custom.js' %}"></script>

<!-- Delivery -->
  <script src="https://code.jquery.com/jquery-3.5.0.js"></script>

<script src="{% static 'file/shop/js/cart.js' %}"></script>


<script src="https://code.jquery.com/jquery-3.1.1.slim.min.js"
        integrity="sha384-A7FZj7v+d/sdmMqp/nOQwliLvUsJfDHW+k9Omg/a/EheAdgtzNs3hpfag6Ed950n" crossorigin="anonymous">
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js"
        integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb" crossorigin="anonymous">
</script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js"
        integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous">
</script>

<script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js'></script>

<!-- Checkbox -->
<script src="{% static 'file/shop/js/checkbox.js' %}"></script>

<!-- Start search-->
<script>
    /*jslint  browser: true, white: true, plusplus: true */
/*global $, countries */
$(function () {
    'use strict';

    var countriesArray = $.map(countries, function (value, key) { return { value: value, data: key }; });

    var nhlTeams = ['{% for name,slug in local %}','{{ name }}','{{ slug }}','{% endfor %}'];
    var nbaTeams = [''];

    var nhl = $.map(nhlTeams, function (team) { return { value: team, data: { category: 'Свердловская область' } }; });
    var nba = $.map(nbaTeams, function (team) { return { value: team, data: { category: '' } }; });
    var teams = nhl.concat(nba);

    // Initialize autocomplete with local lookup:
    $('#autocomplete').devbridgeAutocomplete({
        lookup: teams,
        minChars: 1,
        onSelect: function (suggestion) {
            $('#selection').html('Вы выбрали: ' + suggestion.value);
            var city_local;
            var location_slug=$('#location_slug').val();

            var field = suggestion.value;
            localStorage.location = field;
            var city_local= suggestion.value;
            for (var j = 0; j < nhlTeams.length; j++) {
                if (city_local === nhlTeams[j]) {
                    if (location_slug != nhlTeams[j+1]){
                        $("#remove").trigger("click");
                    };
                    window.location.href = 'https://coop-dostavka.ru/' + nhlTeams[j+1],
                    window.location(window.location.href);
                };
            }
        },
        showNoSuggestionNotice: true,
        noSuggestionNotice: 'В населенный пункт доставка не осуществляется',
        groupBy: 'category'
    });
    if (localStorage.location){
        $('#local-name').text(localStorage.location);
        $('#select_local').attr({
            'value':localStorage.location,
        });
    }
    else {
       $(window).load(function () {
            if (window.location.href.indexOf('shop') == -1){
                 window.location.replace('https://coop-dostavka.ru/');
            }
        });
    }


    // Initialize autocomplete with custom appendTo:
    $('#autocomplete-custom-append').autocomplete({
        lookup: countriesArray,
        appendTo: '#suggestions-container'
    });

    // Initialize autocomplete with custom appendTo:
    $('#autocomplete-dynamic').autocomplete({
        lookup: countriesArray
    });
});
</script>
<script type="text/javascript" src="{% static 'file/shop/js/search_city/jquery-1.8.2.min.js' %}"></script>
<script type="text/javascript" src="{% static 'file/shop/js/search_city/jquery.mockjax.js' %}"></script>
<script type="text/javascript" src="{% static 'file/shop/js/search_city/jquery.autocomplete.js' %}"></script>
<script type="text/javascript" src="{% static 'file/shop/js/search_city/countries.js' %}"></script>
<!-- END Search -->

<!--Accordion-->
<script type="text/javascript" src="{% static 'file/shop/js/accordion.js' %}"></script>

<!--Phone-->
    <script src="{% static 'file/shop/js/script_tel2.js' %}"></script>

<!--Location-->
    <script src="{% static 'file/shop/js/search_city/location.js' %}"></script>

<!--Category-->
    <script src="{% static 'file/shop/category/js/hc-offcanvas-nav.js' %}"></script>
    <script src="{% static 'file/shop/category/js/category_select.js' %}"></script>

<!--Sort products and scroll -->
    <script src="{% static 'file/shop/category/js/popper.js' %}"></script>
    <script src="{% static 'file/shop/category/js/owl.carousel.min.js' %}"></script>
    <script src="{% static 'file/shop/category/js/jquery.magnific-popup.min.js' %}"></script>
    <script src="{% static 'file/shop/category/js/jquery.ui.js' %}"></script>
    <script src="{% static 'file/shop/category/js/jquery.elevatezoom.js' %}"></script>
    <script src="{% static 'file/shop/category/js/tippy-bundle.umd.js' %}"></script>
    <script src="{% static 'file/shop/category/js/plugins.js' %}"></script>
    <script src="{% static 'file/shop/category/js/main.js' %}"></script>
    <script src="{% static 'file/shop/category/js/scroll.js' %}"></script>

    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-DZV7WLHDFF"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-DZV7WLHDFF');
</script>
{% block script %}{% endblock %}
